<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<link href="./theme/assets/style.css" rel="stylesheet">
</head>
<body>
<header>
  <img class="wordmark" src="./theme/assets/github.png"/>
  <h1>Actions Cheat Sheet</h1>
  <img class="logo" src="./theme/assets/logo.png"/>
</header>
<section class="byline">
  <div>GitHub Actions give you the flexibility to build automated software development lifecycle workflows. You can write individual tasks, called actions, and combine them to create  custom workflows in your repository. GitHub Actions are automated processes allowing you to build, test, package, release, or deploy any code project on GitHub, but you can also use them to automate any step of your workflow: merging pull requests, assigning labels, triaging issues to name a few.</div>
</section>
<section class="content">
<div class="sect1 page">
<h2 id="">!</h2>
<div class="sectionbody">
<div class="sect2 column">
<h3 id="_2">!</h3>
<div class="sect3">
<h4 id="_workflow_syntax">Workflow Syntax!!!</h4>
<p class=" paragraph">Workflow files use YAML syntax, and must have either a .yml or .yaml file extension. You must store workflow files in the <code>.github/workflows/</code> directory of your repository.</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">name: Node CI
on: push
  branches:
    - 'releases/*'
jobs:
  my_build:
    runs-on: ubuntu-latest
    needs: my-other-job
    steps:
    - uses: actions/checkout@master
    - name: Say something
      run: echo "A little bit more action"</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_workflow_name">Workflow <code>name</code></h4>
<p class=" paragraph">The name of your workflow. GitHub displays the names of your workflows on your repository&#8217;s actions page.</p>
</div>
<div class="sect3">
<h4 id="_on_event"><code>on</code> Event</h4>
<p class=" paragraph">The name of the GitHub event that triggers the workflow. You can provide a single event string, an array of events, or an event configuration map that restricts the execution of a workflow:</p>
<div class="ulist">
<ul>
<li>
<p>When using the <code>push</code> and <code>pull_request</code> events, <code>branches</code> and <code>tags</code> allow to select or exclude references the workflow will run on, while <code>paths</code> specifies which files must have been modified in order to run the workflow.</p>
</li>
<li>
<p>The <code>types</code> keyword enables you to narrow down activity that causes the workflow to run: <code>created</code>, <code>edited</code>, <code>deleted</code>&#8230;&#8203;
A workflow trigger can also be scheduled:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">on:
  schedule:
  - cron: '*/15 * * * *'</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_jobs_collection"><code>jobs</code> Collection</h4>
<p class=" paragraph">A workflow run is made up of one or more jobs identified by a <code>job_id</code>. Jobs  run in parallel by default. Each job runs in a fresh instance of the virtual environment specified by <code>runs-on</code>.</p>
<div class="sect4">
<h5 id="_job_id"><code>job_id</code></h5>
<p class=" paragraph">The name of the job displayed on GitHub. For example <code>my_build</code> or <code>build</code>. This string is unique with the <code>jobs</code> object.</p>
</div>
</div>
</div>
<div class="sect2 column">
<h3 id="_3">!</h3>
<div class="sect4">
<h5 id="_needs"><code>needs</code></h5>
<p class=" paragraph">Identifies any job that must complete successfully before this job will run. It can be a string or array of strings. If a job fails, all jobs that need it are skipped unless the jobs use a conditional statement that causes the job to continue.</p>
</div>
<div class="sect4">
<h5 id="_runs_on"><code>runs-on</code></h5>
<p class=" paragraph">Inside of the <code>jobs</code> collection, this is the type of virtual host machine to run the job on.
Available virtual machine types are:</p>
<div class="ulist">
<ul>
<li>
<p><code>ubuntu-latest</code>, <code>ubuntu-18.04</code>, or <code>ubuntu-16.04</code></p>
</li>
<li>
<p><code>windows-latest</code>, <code>windows-2019</code>, or <code>windows-2016</code></p>
</li>
<li>
<p><code>macOS-latest</code> or <code>macOS-10.14</code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_container"><code>container</code></h5>
<p class=" paragraph">Instead of running directly on a host selected with <code>runs-on</code>, a container can run any steps in a job that don&#8217;t already specify a container. If you have steps that use both script and container actions, the container actions will run as sibling containers on the same network with the same volume mounts. This object has the following attributes: <code>image</code>, <code>env</code>, <code>ports</code>, <code>volume</code> and <code>options</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">...
jobs:
  my_job:
    container:
      image: node:10.16-jessie
      env:
        NODE_ENV: development
      ports:
        - 80
      volumes:
        - my_docker_volume:/volume_mount
      options: --cpus 1</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_services"><code>services</code></h5>
<p class=" paragraph">Additional containers to host services for a job in a workflow. These are useful for creating databases or cache services. The runner on the virtual machine will automatically create a network and manage the lifecycle of the service containers. Each service is a named object in the <code>services</code> collection (<code>redis</code> or <code>nginx</code> for example) and can receive the same parameters than the <code>container</code> object.</p>
</div>
<div class="sect4">
<h5 id="_timeout_minutes"><code>timeout-minutes</code></h5>
<p class=" paragraph">The maximum number of minutes to let a workflow run before GitHub automatically cancels it. Default: 360</p>
</div>
</div>
</div>
</div>
<div class="sect1 header-nth">
<h2 id="_4">!</h2>
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="theme/assets/github.png" alt="GitHub Logo" width="60">
</div>
</div>
<p class=" paragraph">Actions Cheat Sheet</p>
</div>
</div>
<div class="sect1 page">
<h2 id="_5">!</h2>
<div class="sectionbody">
<div class="sect2 column">
<h3 id="_6">!</h3>
<div class="sect3">
<h4 id="_job_steps">Job <code>steps</code></h4>
<p class=" paragraph">A job contains a sequence of tasks called <code>steps</code>. Steps can run commands, run setup tasks, or run an action from your repository, a public repository, or an action published in a Docker registry. Each step runs in its own process in the virtual environment and has access to the workspace and filesystem.</p>
<div class="sect4">
<h5 id="_step_name">Step <code>name</code></h5>
<p class=" paragraph">Specify the label to be displayed for this step in GitHub. It&#8217;s not required but does improve readability in the logs.</p>
</div>
<div class="sect4">
<h5 id="_uses"><code>uses</code></h5>
<p class=" paragraph">Select an action to run as part of a step in your job. You can use an action defined in the same repository as the workflow, a public repository elsewhere on GitHub, or in a published Docker container image.</p>
</div>
<div class="sect4">
<h5 id="_with"><code>with</code></h5>
<p class=" paragraph">A map of the input parameters defined by the action. Each input parameter is a key/value pair. Input parameters are prefixed with <code>INPUT_</code>, converted to upper case and set as environment variables: the <code>first_name</code> parameter will be exposed as the <code>INPUT_FIRST_NAME</code> environment variable. Special parameter names are:
- <code>args</code>, a string that defines the inputs passed to a Docker container&#8217;s <code>ENTRYPOINT</code>. It is used in place of the <code>CMD</code> instruction in a <code>Dockerfile</code>.
- <code>entrypoint</code>, a string that defines or overrides the executable to run as the Docker container&#8217;s <code>ENTRYPOINT</code>.</p>
</div>
<div class="sect4">
<h5 id="_env"><code>env</code></h5>
<p class=" paragraph">Sets environment variables for steps to use in the virtual environment.  If you are setting a secret in an environment variable, you must use the <code>secrets</code> context.</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">...
steps:
  - name: A cool action
    uses: actions/bin/sh@master
    with:
      entrypoint: /bin/echo
      args: The ${{ github.event_name }} did it
    env:
      last_name: ${{secrets.LASTNAME}}</code></pre>
</div>
</div>
<p class=" paragraph">Default environment variables:</p>
<div class="ulist">
<ul>
<li>
<p><code>HOME</code>: Path to the GitHub home directory used to store user data.</p>
</li>
<li>
<p><code>GITHUB_WORKFLOW</code>: Name of the workflow.</p>
</li>
<li>
<p><code>GITHUB_ACTION</code>: Name of the action.</p>
</li>
<li>
<p><code>GITHUB_ACTOR</code>: Name of the person or app that initiated the workflow.</p>
</li>
<li>
<p><code>GITHUB_REPOSITORY</code>: Owner and repository name.</p>
</li>
<li>
<p><code>GITHUB_EVENT_NAME</code>: Name of the triggering webhook event.</p>
</li>
<li>
<p><code>GITHUB_EVENT_PATH</code>: Path of the file with the webhook event payload.</p>
</li>
<li>
<p><code>GITHUB_WORKSPACE</code>: GitHub workspace directory path.</p>
</li>
<li>
<p><code>GITHUB_SHA</code>: Commit SHA that triggered the workflow.</p>
</li>
<li>
<p><code>GITHUB_REF</code>: Branch or tag ref that triggered the workflow.</p>
</li>
<li>
<p><code>GITHUB_HEAD_REF</code>: Branch of the head repository (forks only).</p>
</li>
<li>
<p><code>GITHUB_BASE_REF</code>: Branch of the base repository (forks only).</p>
</li>
</ul>
</div>
<p class=" paragraph">Default secrets:</p>
<div class="ulist">
<ul>
<li>
<p><code>GITHUB_TOKEN</code>: Token you can leverage for API calls or git commands.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2 column">
<h3 id="_7">!</h3>
<div class="sect4">
<h5 id="_run"><code>run</code></h5>
<p class=" paragraph">Instead of running an existing action, a command line program can be run using the operating system&#8217;s shell. Each run keyword represents a new process and shell in the virtual environment. A specific shell can be selected with the <code>shell</code> attribute.</p>
</div>
<div class="sect4">
<h5 id="_if"><code>if</code></h5>
<p class=" paragraph">Prevents a step from running unless a condition is met. The value is an expression without the <code>${{ &#8230;&#8203; }}</code> block</p>
</div>
<div class="sect3">
<h4 id="_job_strategy">Job <code>strategy</code></h4>
<p class=" paragraph">A build matrix strategy is a set of different configurations of the virtual environment. The job’ set of steps will be executed on each of these configurations. The following exemple specifies 3 nodejs versions on 2 operating systems:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">runs-on: ${{ matrix.os }}
strategy:
  matrix:
    os: [ubuntu-16.04, ubuntu-18.04]
    node: [6, 8, 10]
steps:
  - uses: actions/setup-node@v1
    with:
      node-version: ${{ matrix.node }}</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_fail_fast"><code>fail-fast</code></h5>
<p class=" paragraph">When set to <code>true</code> (default value), GitHub cancels all in-progress jobs if any of the matrix job fails.</p>
</div>
</div>
<div class="sect3">
<h4 id="_context_and_expressions">Context and expressions</h4>
<p class=" paragraph">Expressions can be used to programmatically set variables in workflow files and access contexts. An expression can be any combination of literal values, references to a context, or functions. You can combine literals, context references, and functions using operators. With the exception of the <code>if</code> key, expressions are written in a <code>${{ &#8230;&#8203; }}</code> block.</p>
<div class="sect4">
<h5 id="_contexts">Contexts</h5>
<p class=" paragraph">Contexts are a way to access runtime information. The following objects are available:  <code>github</code>, <code>job</code>, <code>steps</code>, <code>runner</code>, <code>secrets</code>, <code>strategy</code>, <code>matrix</code>.</p>
</div>
<div class="sect4">
<h5 id="_functions">Functions</h5>
<p class=" paragraph">Functions <code>contains</code>, <code>startsWith</code>, <code>endsWith</code> with arguments <code>(searchString, searchValue)</code>: return true if searchString respectively contains, starts or ends with searchValue. These functions are not case sensitive. Casts values to a string.</p>
<p class=" paragraph"><code>format(string, replaceValue0, &#8230;&#8203;, replaceValueN)</code>: replaces values (specified using the {N} syntax, where N is an integer) in the <code>string</code>, with the variable <code>replaceValueN</code>.</p>
<p class=" paragraph"><code>join(element, optionalElem)</code>: all values in <code>element</code> (an array or a string) are concatenated into a string. <code>optionalElem</code> is appended to the end of <code>element</code>.</p>
<p class=" paragraph"><code>toJSON(value)</code>: returns a pretty-print JSON representation of <code>value</code>.</p>
<p class=" paragraph"><code>success()</code>, <code>always()</code>, <code>failure()</code> and <code>cancelled()</code>: these status check functions can be used as expressions in <code>if</code> conditionals.</p>
</div>
</div>
</div>
</div>
</div>
</section>
</body>